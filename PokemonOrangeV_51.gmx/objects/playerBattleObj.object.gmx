<!--This Document is generated by GameMaker, if you edit it by hand then you do so at your own risk!-->
<object>
  <spriteName>&lt;undefined&gt;</spriteName>
  <solid>0</solid>
  <visible>-1</visible>
  <depth>0</depth>
  <persistent>0</persistent>
  <parentName>&lt;undefined&gt;</parentName>
  <maskName>&lt;undefined&gt;</maskName>
  <events>
    <event eventtype="0" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>depth = -700
global.pause = true
otherPlayerTurnEnd = false
myTurnEnd = false
//create attack button
instance_create(view_xview[0] + 154, view_yview[0] + 335, attackButton)
//create bag button
instance_create(view_xview[0] + 359, view_yview[0] + 335, battleBagButton)
//create pokemon button
instance_create(view_xview[0] + 256, view_yview[0] + 435, battlePokemonButton)

usingAttackMenu = false
usingBagMenu = false
usingPokemonMenu = false

//choose first pokemon
//scr_chooseFirstPokemon()

//set current pokemon index
currentPokemon = 0

//send pokemon name
scr_sendPokemonName()

//set current enemy pokemon image
enemyPokemon = ""

//set enemy damage
damageReceived = 0

//find enemy health stat
enemyHealth = 100
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="3" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///Check if usingAttackMenu
if (self.usingAttackMenu) {
    //deactivate current menu if it exists
    if (instance_exists(attackButton)) {
        instance_deactivate_object(attackButton)
    }
    if (instance_exists(battleBagButton)) {
        instance_deactivate_object(battleBagButton)
    }
    if (instance_exists(battlePokemonButton)) {
        instance_deactivate_object(battlePokemonButton)
    }
    //create new menu if it doesn't exist
    if !(instance_exists(moveButton)) {
        var lastButton = instance_create(view_xview[0] + 85, view_yview[0] + 335, moveButton)
        with lastButton {
            str = playerObj.pokemonArray[@ playerBattleObj.currentPokemon, 10]
        }
        lastButton = instance_create(view_xview[0] + 255, view_yview[0] + 335, moveButton)
        with lastButton {
            str = playerObj.pokemonArray[@ playerBattleObj.currentPokemon, 11]
        }
        lastButton = instance_create(view_xview[0] + 85, view_yview[0] + 435, moveButton)
        with lastButton {
            str = playerObj.pokemonArray[@ playerBattleObj.currentPokemon, 12]
        }
        lastButton = instance_create(view_xview[0] + 255, view_yview[0] + 435, moveButton)
        with lastButton {
            str = playerObj.pokemonArray[@ playerBattleObj.currentPokemon, 13]
        }
    }
    if !(instance_exists(backButton)) {
        instance_create(view_xview[0] + 425, view_yview[0] + 385, backButton)
    }
}
</string>
          </argument>
        </arguments>
      </action>
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///Check if usingBagMenu
if (self.usingBagMenu) {
    //deactivate current menu if it exists
    if (instance_exists(attackButton)) {
        instance_deactivate_object(attackButton)
    }
    if (instance_exists(battleBagButton)) {
        instance_deactivate_object(battleBagButton)
    }
    if (instance_exists(battlePokemonButton)) {
        instance_deactivate_object(battlePokemonButton)
    }
    //create new menu if it doesn't exist
    
    if !(instance_exists(backButton)) {
        instance_create(view_xview[0] + 425, view_yview[0] + 385, backButton)
    }
}
</string>
          </argument>
        </arguments>
      </action>
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///Check if usingPokemonMenu
if (self.usingPokemonMenu) {
    //deactivate current menu if it exists
    if (instance_exists(attackButton)) {
        instance_deactivate_object(attackButton)
    }
    if (instance_exists(battleBagButton)) {
        instance_deactivate_object(battleBagButton)
    }
    if (instance_exists(battlePokemonButton)) {
        instance_deactivate_object(battlePokemonButton)
    }
    //create new menu if it doesn't exist
    
}
</string>
          </argument>
        </arguments>
      </action>
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///Check if not using any submenus
if !(self.usingAttackMenu) and !(self.usingBagMenu) and !(self.usingPokemonMenu){
    //create main battle menu if it doesn't exist
    if !(instance_exists(attackButton)) {
        instance_create(view_xview[0] + 154, view_yview[0] + 335, attackButton)
    }
    if !(instance_exists(battleBagButton)) {
        instance_create(view_xview[0] + 359, view_yview[0] + 335, battleBagButton)
    }
    if !(instance_exists(battlePokemonButton)) {
        instance_create(view_xview[0] + 256, view_yview[0] + 435, battlePokemonButton)
    }
}
</string>
          </argument>
        </arguments>
      </action>
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///Check if both players ended turn
if (self.myTurnEnd) and (self.otherPlayerTurnEnd) {
    playerObj.pokemonArray[@ playerBattleObj.currentPokemon, 15] -= playerBattleObj.damageReceived
    //reset flags
    self.myTurnEnd = false
    self.otherPlayerTurnEnd = false
}
if (instance_exists(serverObj)) {
    //if this is the server
    buffer_seek(serverObj.buffer, buffer_seek_start, 0)
    
    buffer_write(serverObj.buffer, buffer_u8, 10)
    buffer_write(serverObj.buffer, buffer_u8, playerObj.pokemonArray[@ playerBattleObj.currentPokemon, 15])
    
    network_send_packet(serverObj.socket, serverObj.buffer, buffer_tell(serverObj.buffer))
}
else if (instance_exists(clientObj)) {
    //if this is the client
    buffer_seek(clientObj.buffer, buffer_seek_start, 0)
    
    buffer_write(clientObj.buffer, buffer_u8, 10)
    buffer_write(clientObj.buffer, buffer_u8, playerObj.pokemonArray[@ playerBattleObj.currentPokemon, 15])
    
    network_send_packet(clientObj.socket, clientObj.buffer, buffer_tell(clientObj.buffer))
}
</string>
          </argument>
        </arguments>
      </action>
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///Check pokemon health
var currenthealth = playerObj.pokemonArray[@ playerBattleObj.currentPokemon, 15]
if (currenthealth &lt;= 0) {
    instance_destroy()
    scr_text_CommunicationConfirmation( "You lost the battle!", 1, playerObj.x, playerObj.y + 240)
    if (instance_exists(moveButton)) {
        instance_deactivate_object(moveButton)
    }
    if (instance_exists(backButton)) {
        instance_deactivate_object(moveButton)
    }
}
else if (self.enemyHealth &lt;= 0) {
    instance_destroy()
    scr_text_CommunicationConfirmation( "You won the battle!", 1, playerObj.x, playerObj.y + 240)
    if (instance_exists(backButton)) {
        instance_deactivate_object(moveButton)
    }
}
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="8" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///Draw background
draw_background(grassBattleBG, self.x, self.y)
</string>
          </argument>
        </arguments>
      </action>
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///Draw current pokemon to battlefield
draw_sprite(asset_get_index(playerObj.pokemonArray[@ self.currentPokemon, 0] + "Back"), all, view_xview[0] + 130, view_yview[0] + 260)
draw_healthbar(view_xview[0] + 300, view_yview[0] + 280, view_xview[0] + 200, view_yview[0] + 270,( (playerObj.pokemonArray[@ self.currentPokemon, 15]) / (playerObj.pokemonArray[@ self.currentPokemon, 3]) ) * 100, c_white, c_red, c_green, 0, false, true)
</string>
          </argument>
        </arguments>
      </action>
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///Draw current enemy pokemon to the field
if !(self.enemyPokemon == "") {
    draw_sprite(asset_get_index(self.enemyPokemon + "Front"), all, view_xview[0] + 385, view_yview[0] + 155)
}
</string>
          </argument>
        </arguments>
      </action>
    </event>
  </events>
  <PhysicsObject>0</PhysicsObject>
  <PhysicsObjectSensor>0</PhysicsObjectSensor>
  <PhysicsObjectShape>0</PhysicsObjectShape>
  <PhysicsObjectDensity>0.5</PhysicsObjectDensity>
  <PhysicsObjectRestitution>0.100000001490116</PhysicsObjectRestitution>
  <PhysicsObjectGroup>0</PhysicsObjectGroup>
  <PhysicsObjectLinearDamping>0.100000001490116</PhysicsObjectLinearDamping>
  <PhysicsObjectAngularDamping>0.100000001490116</PhysicsObjectAngularDamping>
  <PhysicsObjectFriction>0.200000002980232</PhysicsObjectFriction>
  <PhysicsObjectAwake>-1</PhysicsObjectAwake>
  <PhysicsObjectKinematic>0</PhysicsObjectKinematic>
  <PhysicsShapePoints/>
</object>
